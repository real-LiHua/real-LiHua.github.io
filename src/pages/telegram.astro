---
import BaseLayout from "../layouts/BaseLayout.astro";
---

<BaseLayout>
  <div class="hero bg-base-200 min-h-screen">
    <div class="hero-content flex-col lg:flex-row-reverse">
      <div class="card bg-base-100 w-full max-w-sm shrink-0 shadow-2xl">
        <div class="card-body">
          <fieldset class="fieldset">
            <input class="input" type="text" />
            <button class="btn btn-neutral mt-4">чбошод</button>
          </fieldset>
        </div>
      </div>
    </div>
  </div>
  <script>
    const data = (async () => {
      try {
        const keyPair = (await window.crypto.subtle.generateKey(
          {
            name: "RSA-OAEP",
            modulusLength: 2048,
            publicExponent: new Uint8Array([1, 0, 1]),
            hash: "SHA-256",
          },
          true,
          ["wrapKey", "unwrapKey"],
        )) as CryptoKeyPair;

        const pubSpki = await window.crypto.subtle.exportKey(
          "jwk",
          keyPair.publicKey,
        );
        const resp = await fetch("https://blog.lihua0.workers.dev/meow", {
          method: "POST",
          body: JSON.stringify(pubSpki),
        });
        console.log(resp);
        return resp;
      } catch (err) {
        console.error(err);
      }
    })();
    document
      .querySelector("fieldset > button")
      .addEventListener("click", () => {
        alert("Button was clicked!");
      });
  </script>
</BaseLayout>
